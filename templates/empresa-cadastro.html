{% extends "base.html" %}

{% block head %}
    <link rel="stylesheet" href="../static/css/cadastro.css">
    <title>Cadastro | Consumidor</title>
{% endblock %}

{% block header_current %}
    <div class="d-flex column-gap-4 align-items-center">
        <a class="header-element secundary-600" href="{{url_for('empresa.cadastro')}}"><img src="../static/imgs/cadastro-instituicao.svg" alt="">Cadastre-se</a>
        <a class="header-element power-Gray-300" href="{{url_for('empresa.login')}}"><img src="../static/imgs/login-white.svg" alt="">Login</a>
    </div>
{% endblock %}

{% block main %}
<div class="contents bg-power-Gray-100" id="conteudo">
    <main class="container main-cadastro position-relative py-5 row altura-100 align-items-center mx-auto column-gap-4">
        
        <section class="conteudo-cadastro col-5 z-1">
            <h1 class="secundary-600 pb-3 mb-4">Cadastre-se</h1>
            <h5 class="power-Gray-800 pb-3"><span class="secundary-600 fw-bold">Empresa</span>, você está prestes a fazer parte do <span class="forest-200 fw-bold">EcoConsumo!</span></h5>
            <h6 class="power-Gray-800">Você é doador? <a class="forest-200 fw-bold p-1 text-select transition-ease-in" href="{{url_for('doador.cadastro')}}">Clique aqui</a></h6>
        </section>

        <section class="section-cadastro background-forms position-absolute  py-64 end-0 top-0 col-7 d-flex align-items-center justify-content-center">
            <div class="card-cadastro p-4 text-center col-4 ">
                <img class="pb-4" src="../../static/imgs/Instituição Icon.svg" alt="">
                <h5 class="secundary-600 fw-bold pb-2">Cadastre-se</h5>
                <p class="power-Gray-700 gg-font fw-medium">Por favor digite algumas informações</p>
                <div class="power-Gray-700 g-font">
                    <p id='passos'>Passo 1 de 3</p>
                    <img src="../../static/imgs/rounded.svg" alt="">
                    <img src="../../static/imgs/rounded.svg" alt="" class="passo2 passo3">
                    <img src="../../static/imgs/rounded.svg" alt="" class="passo3">
                    <img src="../../static/imgs/circle.svg" alt="" class="passo1">
                    <img src="../../static/imgs/circle.svg" alt="" class="passo1 passo2">

                    
                </div>

                <form action="{{url_for('usuario.cadastrar', user_type='empresa')}}" method="post" class="gx-32 d-flex flex-column">
        
                    <div class="campos-form d-flex flex-column row-gap-3 passo1">
                        <div class="campo-eco text-start">
                            <label class="d-block g-font power-Gray-700" for="">Nome<span class="obrigatorio">*</span></label>
                            <input class="input-eco input-cadastro px-2" type="name" placeholder="Nome" name="nome">
                        </div>

                        <div class="campo-eco text-start">
                            <label class="d-block g-font power-Gray-700" for="">CNPJ<span class="obrigatorio">*</span></label>
                            <input class="input-eco input-cadastro px-2" placeholder="xx.xxx.xxx/xxxx-xx" name="cnpj" oninput="formatarCNPJ(this)">
                        </div>

                        <div class="campo-eco text-start">
                            <label class="d-block g-font power-Gray-700" for="">Telefone<span class="obrigatorio">*</span></label>
                            <input class="input-eco input-cadastro px-2" type="tel" placeholder="Telefone" name="telefone">
                        </div>
                    </div>

                    <div class="d-flex column-gap-4 passo1">
                        <a href="{{url_for('empresa.login')}}" class="btn-stretch btn-duo rounded-2 fw-semibold bg-power-Gray-100 gg-font secundary-600 d-inline-flex align-items-center justify-content-center  py-2 transition-ease-in">Voltar</a>
                        <input class="btn-stretch btn-duo rounded-2 fw-semibold bg-secundary-600 gg-font power-Gray-100 d-inline-flex align-items-center justify-content-center transition-ease-in" type="button" onclick="mostrarParte('passo2')" value="Avançar">
                    </div>


                    <div class="campos-form d-flex flex-column row-gap-3 passo2">
                        <div class="campo-eco text-start">
                            <label class="d-block g-font power-Gray-700" for="">CEP<span class="obrigatorio">*</span></label>
                            <input class="input-eco input-cadastro px-2" type="number" placeholder="xxxxxx-xxx" name="cep">
                        </div>

                        <div class="campo-eco text-start">
                            <label class="d-block g-font power-Gray-700" for="">Bairro<span class="obrigatorio">*</span></label>
                            <input class="input-eco input-cadastro px-2" type="text" placeholder="Bairro" name="bairro">
                        </div>
                        
                        <div class="campo-eco text-start">
                            <label class="d-block g-font power-Gray-700" for="">Rua<span class="obrigatorio">*</span></label>
                            <input class="input-eco input-cadastro px-2" type="text" placeholder="Rua" name="rua">
                        </div>

                        <div class="campo-eco text-start">
                            <label class="d-block g-font power-Gray-700" for="">Número<span class="obrigatorio">*</span></label>
                            <input class="input-eco input-cadastro px-2" type="number" placeholder="Número" name="numero">
                        </div>
                    </div>

                    <div class="d-flex column-gap-4 passo2">
                        <a class="btn-stretch btn-duo rounded-2 fw-semibold bg-power-Gray-100 gg-font secundary-600 d-inline-flex align-items-center justify-content-center py-2 transition-ease-in" type="button" onclick="mostrarParte('passo1')">Voltar</a>
                        <input class="btn-stretch btn-duo rounded-2 fw-semibold bg-secundary-600 gg-font power-Gray-100 d-inline-flex align-items-center justify-content-center transition-ease-in" type="button" onclick="mostrarParte('passo3')" value="Avançar">
                    </div>


                    <div class="campos-form d-flex flex-column row-gap-3 passo3">
                        <div class="campo-eco text-start">
                            <label class="d-block g-font power-Gray-700" for="">Email<span class="obrigatorio">*</span></label>
                            <input class="input-eco input-cadastro px-2" type="email" placeholder="Email" name="email">
                        </div>

                        <div class="campo-eco text-start">
                            <label class="d-block g-font power-Gray-700" for="">Senha<span class="obrigatorio">*</span></label>
                            <input class="input-eco input-cadastro px-2" type="password" placeholder="Senha" name="senha">
                        </div>
                        
                        <div class="campo-eco text-start">
                            <label class="d-block g-font power-Gray-700" for="">Confimar senha<span class="obrigatorio">*</span></label>
                            <input class="input-eco input-cadastro px-2" type="password" placeholder="Confimar senha" name="confirmar">
                        </div>

                    </div>

                    <div class="d-flex column-gap-4 passo3">
                        <a class="btn-stretch btn-duo rounded-2 fw-semibold bg-power-Gray-100 gg-font secundary-600 d-inline-flex align-items-center justify-content-center py-2 transition-ease-in" type="button" onclick="mostrarParte('passo2')">Voltar</a>
                        <input class="btn-stretch btn-duo rounded-2 fw-semibold bg-secundary-600 gg-font power-Gray-100 d-inline-flex align-items-center justify-content-center transition-ease-in" type="submit" value="Concluir">
                    </div>

                </form>
            </div>
        </section>
    </main>
</div>

<script>
    window.onload = function() {
        mostrarParte('passo1');
    };

    function mostrarParte(partClass) {
        console.log('Executado', partClass)
        document.querySelectorAll('.passo1').forEach(function(element) {
            element.classList.add('hidden');
        });
        
        document.querySelectorAll('.passo2').forEach(function(element) {
            element.classList.add('hidden');
        });

        document.querySelectorAll('.passo3').forEach(function(element) {
            element.classList.add('hidden');
        });

        document.querySelectorAll('.' + partClass).forEach(function(element) {
            element.classList.remove('hidden');
        });

        var passosParagrafo = document.getElementById('passos');
        if (partClass === 'passo1') {
            passosParagrafo.textContent = 'Passo 1 de 3';
        } else if (partClass === 'passo2') {
            passosParagrafo.textContent = 'Passo 2 de 3';
        } else {
            passosParagrafo.textContent = 'Passo 3 de 3';
        }
    }

    function formatarCNPJ(input) {
        var inputValue = input.value.replace(/\D/g, '');

        if (inputValue.length > 2) {
            inputValue = inputValue.substring(0, 2) + '.' + inputValue.substring(2);
        }
        if (inputValue.length > 6) {
            inputValue = inputValue.substring(0, 6) + '.' + inputValue.substring(6);
        }
        if (inputValue.length > 10) {
            inputValue = inputValue.substring(0, 10) + '/' + inputValue.substring(10);
        }
        if (inputValue.length > 15) {
            inputValue = inputValue.substring(0, 15) + '-' + inputValue.substring(15, 17);
        }

        input.value = inputValue;
    }
</script>
{% endblock %}
